<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1><a href="https://github.com/dpmcmlxxvi/geojson-flatbush">GeoJSON Flatbush</a></h1>
<p><a href="https://travis-ci.org/dpmcmlxxvi/geojson-flatbush"><img src="https://travis-ci.org/dpmcmlxxvi/geojson-flatbush.svg?branch=master" alt="build"></a>
<a href="https://coveralls.io/r/dpmcmlxxvi/geojson-flatbush?branch=master"><img src="https://img.shields.io/coveralls/dpmcmlxxvi/geojson-flatbush.svg" alt="coverage"></a>
<a href="https://badge.fury.io/js/geojson-flatbush"><img src="https://badge.fury.io/js/geojson-flatbush.svg" alt="npm"></a>
<a href="https://www.codacy.com/app/dpmcmlxxvi/geojson-flatbush?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=dpmcmlxxvi/geojson-flatbush&amp;utm_campaign=Badge_Grade"><img src="https://api.codacy.com/project/badge/Grade/698be81064804bb2b03b7f33f7471924" alt="code"></a></p>
<p>GeoJSON implementation of <a href="https://github.com/mourner/flatbush">Flatbush</a> â€” A really fast <strong>static
spatial index</strong> for 2D points and rectangles in JavaScript.</p>
<h2>GETTING STARTED</h2>
<h3>Install</h3>
<pre class="prettyprint source lang-bash"><code>npm install --save geojson-flatbush
</code></pre>
<h3>Example</h3>
<p>This is a simple example that populates the index with lines and queries
the index with a polygon. Note, for this example, <a href="https://github.com/Turfjs/turf">Turf</a> must be
installed <code>npm install @turf/turf</code></p>
<pre class="prettyprint source lang-javascript"><code>// Initialize GeojsonFlatbush with features.
const index = new GeojsonFlatbush(2)

// Add feature collection to index.
const collection = turf.featureCollection([
  turf.lineString([[0, 0], [1, 1]]),
  turf.lineString([[0, 1], [1, 2]]),
]);
index.load(collection);

// Perform the indexing.
index.finish();

// Query with polygon.
const polygon = turf.polygon([[[0, 0], [1, 0], [1, 1], [0, 1], [0, 0]]]);
const found = index.search(polygon, collection);

// Find k-nearest neighbors and return IDs instead features
const ids = index.neighbors(point, 5);

// Do something with found feature.
found.features.forEach((feature) => {
  console.log(feature);
});

// Reconstruct the index from a raw array buffer
const newindex = GeojsonFlatbush.from(index.data);
</code></pre>
<h2>USAGE</h2>
<p>For a full listing of all available API options see the
<a href="https://dpmcmlxxvi.github.io/geojson-flatbush/">documentation page</a>. The following methods are
available:</p>
<pre class="prettyprint source lang-javascript"><code>const index = new GeojsonFlatbush(numItems, [nodeSize], [ArrayType])
  // numItems: Number of items to index
  // nodeSize: Size of the tree node (16 by default)
  // ArrayType: the array type used for coordinates storage (Float64Array by default)

index.add(GeoJSON)                       // Add GeoJSON to index
index.finish()                           // Perform indexing
index.load(FeatureCollection)            // Load feature collection or array
index.neighbors(point, k)                // Find k-nearest neighbors from point
index.search(GeoJSON, FeatureCollection) // Find features within bounding box
GeojsonFlatbush.from(index.data)         // Create new index from raw data
</code></pre>
<h2>TIPS</h2>
<ul>
<li>
<p><code>GeojsonFlatbush</code> is really just a wrapper to <code>Flatbush</code> but just more
GeoJSON friendly.</p>
</li>
<li>
<p><code>GeojsonFlatbush</code>, just like its underlying spatial index, <code>Flatbush</code>, does
not store the original data when using <code>add()</code> or <code>load()</code>. It only stores a
bounding box and its ID (i.e., the order in which the data was added).</p>
</li>
<li>
<p>The query methods (<code>neighbors</code>, <code>search</code>) will return a <code>FeatureCollection</code>
if a source collection is provided, but the order of the features in the
source collection must match the order in which the original data was added.</p>
</li>
<li>
<p>It is probably not a good idea to combine using <code>add</code> and <code>load</code> since the
order of the data will be needed to map the query output IDs to the original
features. It is best to just add all your data to a single
<code>FeatureCollection</code> for loading and querying. Unless you want to keep track
of the ID order.</p>
</li>
</ul>
<h2>BUILD</h2>
<p>To build and test the library locally:</p>
<pre class="prettyprint source lang-shell"><code>npm install
npm test
</code></pre>
<h2>LICENSE</h2>
<p>Copyright (c) 2019 Daniel Pulido <a href="mailto:dpmcmlxxvi@gmail.com">mailto:dpmcmlxxvi@gmail.com</a></p>
<p>Source code is released under the <a href="http://opensource.org/licenses/ISC">MIT License</a>.</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="GeojsonFlatbush.html">GeojsonFlatbush</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.2</a> on Sun Jun 02 2019 23:23:03 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>